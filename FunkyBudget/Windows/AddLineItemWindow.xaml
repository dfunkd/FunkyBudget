<Window x:Class="FunkyBudget.Windows.AddLineItemWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:enums="clr-namespace:FunkyBudget.Models.Enums"
        xmlns:ext="clr-namespace:FunkyBudget.Core.Extensions"
        xmlns:fa="http://schemas.fontawesome.io/icons/"
        xmlns:local="clr-namespace:FunkyBudget.Windows"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:uc="clr-namespace:FunkyBudget.UserControls"
        xmlns:vm="clr-namespace:FunkyBudget.ViewModels"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        d:DataContext="{d:DesignInstance Type=vm:BudgetViewModel}"
        mc:Ignorable="d"
        Background="{DynamicResource Darkest}"
        Height="295"
        ResizeMode="NoResize"
        Title="{Binding Path=Title}"
        Width="880"
        WindowState="Normal"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        Loaded="OnLoaded">

    <Window.CommandBindings>
        <CommandBinding Command="{x:Static local:AddLineItemWindow.AddLineItemCommand}" CanExecute="CanExecuteAddLineItemCommand" Executed="ExecutedAddLineItemCommand" />
        <CommandBinding Command="{x:Static local:AddLineItemWindow.CancelCommand}" CanExecute="CanExecuteCancelCommand" Executed="ExecutedCancelCommand" />
    </Window.CommandBindings>

    <Window.DataContext>
        <vm:AddLineItemViewModel />
    </Window.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="40" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Border x:Name="brdHeader" Grid.Row="0" Background="{DynamicResource HeaderFade}" BorderThickness="1" BorderBrush="{DynamicResource Darkest}" CornerRadius="0"
                MouseDown="OnDrag">
            <TextBlock FontWeight="Bold" FontSize="14" Foreground="{DynamicResource Lightest}" HorizontalAlignment="Left" Margin="10" Text="{Binding Title}"
                       VerticalAlignment="Center" />
        </Border>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Border Grid.Column="0" Grid.Row="0" Background="{DynamicResource Darker}" BorderBrush="{DynamicResource Darkest}" BorderThickness="1" CornerRadius="5, 15, 0, 0"
                    HorizontalAlignment="Left" Margin="5, 5, 5, 0" Padding="15, 0, 25, 0">
                <TextBlock FontSize="18" FontWeight="Bold" Foreground="{DynamicResource Lightest}" Text="Description" />
            </Border>
            <TextBox Grid.Column="0" Grid.Row="1" AcceptsReturn="False" AcceptsTab="False" Margin="5, 0, 5, 5" Style="{DynamicResource BudgetTextBoxStyle}"
                     Text="{Binding Name, Mode=TwoWay}" />

            <Border Grid.Column="1" Grid.Row="0" Background="{DynamicResource Darker}" BorderBrush="{DynamicResource Darkest}" BorderThickness="1" CornerRadius="5, 15, 0, 0"
                    HorizontalAlignment="Left" Margin="5, 5, 5, 0" Padding="15, 0, 25, 0">
                <TextBlock FontSize="18" FontWeight="Bold" Foreground="{DynamicResource Lightest}" Text="Amount" />
            </Border>
            <xctk:DecimalUpDown Grid.Column="1" Grid.Row="1" Margin="5, 0, 5, 5" Value="{Binding Amount, Mode=TwoWay}" />

            <DockPanel Grid.Column="2" Grid.Row="1">
                <CheckBox x:Name="cbIsCredit" DockPanel.Dock="Left" Background="{DynamicResource Lighter}" Content="Is Credit" Foreground="{DynamicResource Lightest}"
                          HorizontalAlignment="Left" IsChecked="{Binding IsCredit, Mode=TwoWay}" Margin="5" />
                <CheckBox DockPanel.Dock="Right" Background="{DynamicResource Lighter}" Content="Is Paid On Credit Card" Foreground="{DynamicResource Lightest}"
                          HorizontalAlignment="Right" IsChecked="{Binding IsPaidOnCC, Mode=TwoWay}" Margin="5"
                          Visibility="{Binding ElementName=cbIsCredit, Path=IsChecked, Converter={StaticResource FalseToVisibleConverter}}" />
            </DockPanel>

            <Border Grid.Column="0" Grid.Row="2" Background="{DynamicResource Darker}" BorderBrush="{DynamicResource Darkest}" BorderThickness="1" CornerRadius="5, 15, 0, 0"
                    HorizontalAlignment="Left" Margin="5, 5, 5, 0" Padding="15, 0, 25, 0">
                <TextBlock FontSize="18" FontWeight="Bold" Foreground="{DynamicResource Lightest}" Text="Start Date" />
            </Border>
            <xctk:DateTimePicker Grid.Column="0" Grid.Row="3" Value="{Binding StartDate, Mode=TwoWay}" />

            <Border Grid.Column="1" Grid.Row="2" Background="{DynamicResource Darker}" BorderBrush="{DynamicResource Darkest}" BorderThickness="1" CornerRadius="5, 15, 0, 0"
                    HorizontalAlignment="Left" Margin="5, 5, 5, 0" Padding="15, 0, 25, 0">
                <TextBlock FontSize="18" FontWeight="Bold" Foreground="{DynamicResource Lightest}" Text="End Date" />
            </Border>
            <xctk:DateTimePicker Grid.Column="1" Grid.Row="3"  Value="{Binding EndDate, Mode=TwoWay}" />

            <Border Grid.Column="2" Grid.Row="2" Background="{DynamicResource Darker}" BorderBrush="{DynamicResource Darkest}" BorderThickness="1" CornerRadius="5, 15, 0, 0"
                    HorizontalAlignment="Left" Margin="5, 5, 5, 0" Padding="15, 0, 25, 0"
                    Visibility="{Binding Frequency, Converter={StaticResource FrequencyToVisibilityConverter}}">
                <TextBlock FontSize="18" FontWeight="Bold" Foreground="{DynamicResource Lightest}" Text="Day Due" />
            </Border>
            <xctk:IntegerUpDown Grid.Column="3" Grid.Row="3" Value="{Binding DueDate, Mode=TwoWay}"
                    Visibility="{Binding Frequency, Converter={StaticResource FrequencyToVisibilityConverter}}" />

            <Border Grid.Column="0" Grid.Row="4" Background="{DynamicResource Darker}" BorderBrush="{DynamicResource Darkest}" BorderThickness="1" CornerRadius="5, 15, 0, 0"
                    HorizontalAlignment="Left" Margin="5, 5, 5, 0" Padding="15, 0, 25, 0">
                <TextBlock FontSize="18" FontWeight="Bold" Foreground="{DynamicResource Lightest}" Text="Frequency" />
            </Border>
            <Border Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="5" Background="{DynamicResource Lighter}" BorderThickness="1" BorderBrush="{DynamicResource Darker}"
                    Margin="5, 0, 5, 5">
                <WrapPanel x:Name="wpFrequencies" HorizontalAlignment="Center" Orientation="Horizontal" VerticalAlignment="Center" />
            </Border>

            <DockPanel Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="6" HorizontalAlignment="Right" LastChildFill="False" Margin="15, 0">
                <Button DockPanel.Dock="Left" Command="local:AddLineItemWindow.AddLineItemCommand" Margin="5, 20, 10, 15" Style="{DynamicResource faButtonStyle}">
                    <Button.Content>
                        <fa:ImageAwesome Foreground="{DynamicResource Lightest}" Height="15" Icon="Save" Stretch="Uniform" Width="15" />
                    </Button.Content>
                </Button>
                <Button DockPanel.Dock="Left" Command="local:AddLineItemWindow.CancelCommand" Margin="10, 20, 5, 15" Style="{DynamicResource faButtonStyle}">
                    <Button.Content>
                        <fa:ImageAwesome Foreground="{DynamicResource Lightest}" Height="15" Icon="Ban" Stretch="Uniform" Width="15" />
                    </Button.Content>
                </Button>
            </DockPanel>
        </Grid>
    </Grid>
</Window>
